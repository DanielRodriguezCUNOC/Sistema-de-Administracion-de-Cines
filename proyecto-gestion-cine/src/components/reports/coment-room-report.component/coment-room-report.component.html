<div class="coment-room-report-container">
  <div class="report-header">
    <h1 class="report-title">
      <i class="bi bi-chat-dots"></i>
      Reporte de Comentarios de Salas
    </h1>
    <p class="report-subtitle">Filtrado por intervalo de tiempo y sala</p>
  </div>

  < class="filters-card">
  <form [formGroup]="reportForm" (ngSubmit)="generateReport()">
    <div class="row g-3 align-items-end">
      <div class="col-md-5">
        <label for="fechaInicio" class="form-label">Fecha Inicio</label>
        <input type="date" id="fechaInicio" class="form-control" formControlName="fechaInicio" />
      </div>
      <div class="col-md-5">
        <label for="fechaFin" class="form-label">Fecha Fin</label>
        <input type="date" id="fechaFin" class="form-control" formControlName="fechaFin" />
      </div>
      <div class="col-md-5">
        <label for="sala" class="form-label">Sala</label>
        <select id="sala" class="form-control" formControlName="sala">
          <option value="" disabled>-- Seleccione una sala --</option>
          @for( sala of salas; track sala.idSala) {
          <option [value]="sala.idSala">{{ sala.nombreSala }}</option>
          }
        </select>
      </div>
      <div class="col-md-2">
        <button
          type="submit"
          class="btn-generate w-100"
          [disabled]="isLoading || reportForm.invalid"
        >
          @if(isLoading) {
          <span>Generando...</span>
          } @if(!isLoading) {
          <span><i class="bi bi-search"></i> Generar</span>
          }
        </button>
      </div>
    </div>
  </form>

  @if(errorMessage) {
  <div class="alert-error mt-3">
    <i class="bi bi-exclamation-triangle"></i>
    {{ errorMessage }}
  </div>
  } @if(report){
  <div class="comments-section">
    <h2>Comentarios</h2>
    @for(comentario of comentarios; track comentario.idComentario) {
    <div>
      <p>
        <strong>{{ comentario.nombreUsuario }}:</strong> {{ comentario.comentario }}
      </p>
    </div>
    }
  </div>
  }
</div>
